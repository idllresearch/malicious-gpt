# Method for Generating Intermediary Evaluation Results in Quality Evaluation

## Procedure

### Step 1: Code format compliance (F), compilability (C), validity (V) 

Use the **service** folder as an example. The folders **poe** and **flowgpt** follow the same procedure.

- Check Python code on format compliance and compilability.

```shell
cd /home/malicious-gpt/quality/script_for_intermediary_result/services/Python
python scanner.py
```

- Check C/C++ code on format compliance and compilability.

```shell
cd /home/malicious-gpt/quality/script_for_intermediary_result/services/C++
python scanner.py
```

- Check HTML code and pages on format compliance and validity. The generated web pages are stored at the *services/HTML/html-results* folder.

```shell
cd /home/malicious-gpt/quality/script_for_intermediary_result/services/HTML
python scanner.py
```

- Summarize as files in the **CodeSyn** folder

```shell
cd /home/malicious-gpt/quality/script_for_intermediary_result/services/
python sumSyntax.py
```

### Step 2: Code evasiveness (E)

- Check code of Python, C/C++, and HTML on evasiveness against the virus detector (VirusTotal). Generate files in the **codeDetection** folder.

```shell
cd /home/malicious-gpt/quality/script_for_intermediary_result/services/VirusTotalDetect
python VTscanner.py
```

### Step 3: Email format compliance (F) and readability (R)

- Check emails on format compliance and readability. Generate files in the **mailFluency** folder.

```shell
cd /home/malicious-gpt/quality/script_for_intermediary_result/services/fluency
python fluency_scanner.py
```

### Step 4: Email evasiveness (E)

- Check emails on evasiveness against the phishing detector (OOPSpam). Generate files in the **mailDetection** folder

```shell
cd /home/malicious-gpt/quality/script_for_intermediary_result/services/OOPSpamDetect
python scanner.py
```

## Input and output

The input is the content generated by Malicious LLMs, which is stored at [malicious_LLM_responses](https://github.com/idllresearch/malicious-gpt/tree/main/malicious_LLM_responses). 

The output is the intermediary evaluation results, which are stored at [quality/services](https://github.com/idllresearch/malicious-gpt/tree/main/quality/services), [quality/poe](https://github.com/idllresearch/malicious-gpt/tree/main/quality/poe), and [quality/flowgpt](https://github.com/idllresearch/malicious-gpt/tree/main/quality/flowgpt). 

## Environment

- OS: Windows (need **Clang** to analyze the malicious C++ code targeting Windows)

- Python package:

```
textstat
tqdm
clang
```

- Note: 

When running *./C++/scanner.py*, you might meet the [issue with Clang](https://stackoverflow.com/questions/22730935/why-cant-this-python-script-find-the-libclang-dll).  In order to run *./C++/scanner.py*, it is necessary to install Clang on Windows. Here is the [Clang installation method](https://www.wikihow.com/Install-Clang-on-Windows).

## Advantages of Using Intermediary Evaluation Results

1. **Operating System Flexibility**: The running operating system is not limited to Windows, using intermediary evaluation results. To analyze the compilability of malicious C++ code targeting Windows, the checking code should be run on Windows. Intermediary evaluation results provide the outcome of checking the compilability of such malicious C++ code.

2. **Time and Cost Efficiency**: Intermediary evaluation results help users save time and money in obtaining the final quality evaluation results. To get the intermediary evaluation results, users need APIs from VirusTotal and OOPSpam, which have very strict query limits. Intermediary evaluation results provide the execution results using these APIs.

3. **Clear Data Structure**: Intermediary evaluation results possess a clear data structure.

Therefore, to save your time and money, we strongly recommend using intermediary evaluation results!